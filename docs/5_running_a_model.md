# Running a Model

Once you have built and validated your MORPHE2US model, the next step is to run the optimization. This process involves selecting an appropriate solver, executing the model in SpineToolbox, and ensuring results are correctly generated.

---

## 🚀 Step 1: Launch SpineToolbox

1. Open the **SpineToolbox** graphical interface.
2. Open your MORPHE2US project, or create a new one.
3. Add your model database (the `.json` file generated by the parser) as a **SpineDB** item.
4. Confirm the database appears correctly in the project workspace.

---

## 🧠 Step 2: Configure the Optimization

Before running the model:

- ✅ Verify all **time series** and **parameters** are loaded correctly.
- ✅ Ensure that **scenario settings** are defined (e.g., start year, end year, emissions targets).
- ✅ Double-check that **technologies and nodes** are well-connected in the data structure.

---

## 🛠️ Step 3: Select and Configure a Solver

MORPHE2US (via SpineOpt) supports various optimization solvers. Choose one based on your performance needs:

| Solver  | Type         | Notes                      |
|---------|--------------|----------------------------|
| GLPK    | Open source  | Slow, but always available |
| CBC     | Open source  | Faster, often sufficient   |
| CPLEX   | Commercial   | Very fast, requires license|
| Gurobi  | Commercial   | Excellent performance      |

To set a solver:
1. In **SpineToolbox**, locate the `SpineOpt` task.
2. Right-click → Properties → **Solver Settings**
3. Choose your preferred solver and set a time limit if needed.

---

## ▶️ Step 4: Run the Model

With everything set up:

1. Right-click on the `SpineOpt` task.
2. Select **"Run task"** or click the ▶️ button.
3. Monitor the log window for progress and any warnings/errors.

> 💡 **Tip:** For large models, expect longer runtimes. For fast iterations, start with short time horizons or fewer technologies.

---

## 📁 Step 5: View and Export Results

Once the model completes:

- Open the output database to view results (automatically generated by SpineOpt).
- Use **SpineToolbox visualizations** or export data to `.csv` or Excel.

Typical outputs include:

| File Name                  | Description                               |
|---------------------------|-------------------------------------------|
| `energy_flows.csv`        | Hourly flows per technology and node      |
| `investments.csv`         | Capacity additions by technology/year     |
| `emissions.csv`           | CO₂ emissions per time slice              |
| `cost_summary.csv`        | System cost breakdown                     |
| `curtailment.csv`         | Unused generation (e.g. solar/wind)       |

> 📤 To export: use SpineToolbox's export tools or write a script that reads the SpineDB `.sqlite` or `.json` file.

---

## 🧰 Troubleshooting

If the model fails to run:

- ❌ **Infeasible model:** Check constraints (e.g., demand too high, no valid tech)
- ⚠️ **Missing inputs:** Ensure all time series and costs are present
- 🐌 **Too slow:** Try a smaller horizon or simpler tech mix

Use the log window in SpineToolbox for detailed error messages and solver output.

---

## ✅ Next Step: Analyze Your Results

Once your model runs successfully and results are exported, move to:

👉 [Analyzing the Results](analysing_a_model.md)
